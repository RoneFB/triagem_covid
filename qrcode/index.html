<!DOCTYPE html>
<html lang="pt-bt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador Cart√£o Triagem COVID - ALLTEC</title>
    <link rel="stylesheet" href="../src/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../src/css/styles.css">
    <script type="text/javascript" src="qrcode.js"></script>
    </head>
    <body>
        <div class="container" id="cabecalho">
            <div class="row mt-4">
                <div class="col">
                    <label for="nome">Nome: </label><input class="form-control" type="text" id="nome" value="">
                </div>   
                <div class="col">
                    <label for="matricula">Matricula: </label><input class="form-control" type="text" id="matricula" value="">
                </div> 
            </div>
             <button class="btn btn-success mt-4" onClick="createQrCode()">Gerar QR Code</button>
        </div>
        
        
        <div class="qrcode row mt-4"></div>
        <div class="container">
            <button id="imprimir" class="btn btn-danger">Imprimir</button>
        </div>
        <script src="../src/js/jquery-3.5.1.min.js"></script>
    </body>
    <script>
    
    function createQrCode()
    {
        var userInput = document.getElementById('nome').value;
        var matriculaInput = document.getElementById('matricula').value;

        $('.qrcode').append($.parseHTML(`

            <div class="card border-dark mb-3 col-md-4" style="max-width: 18rem;">
                <div class="card-header">TRIAGEM COVID - ALLTEC</div>
                <div class="card-body text-dark">
                    <div id="qrcode-${matriculaInput}"></div>
                </div>
                <div class="card-footer" id="footer-${matriculaInput}"></div>
            </div>
        `))
        var qrcode = new QRCode("qrcode-"+matriculaInput, {
            text: '{"nome":'+ '"'+userInput + '",\n' + '"matricula":'+'"'+matriculaInput+'"}',
            width: 128,
            height: 128,
            colorDark: "black",
            colorLight: "white",
            correctLevel : QRCode.CorrectLevel.H
        });
        $('#footer-'+matriculaInput).append($.parseHTML(`<span>Nome: ${userInput}<span>
            <span>Matricula: ${matriculaInput}</span>`))

        $("input").val(""); 
    }
    
    $("#imprimir").on('click', () => {
        $(".container").remove();
        print();
    });
    </script>
    <style>
     
    </style>
</html>